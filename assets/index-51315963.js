(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();let o=[];axios.get("https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json").then(function(e){o=e.data.data,l()});let y=document.querySelector(".ticketCard");const L=document.querySelector(".searchResult");function l(e="全部地區"){const r=e==="全部地區"?o:o.filter(n=>n.area===e);L.textContent=r.length?`本次搜尋共 ${r.length} 筆資料`:"查無此關鍵字資料";let t="";r.forEach(function(n){t+=`<li class="col-4 mb-9">
      <div class="card border-0 shadow position-relative">
        <span class="tag-l position-absolute top-0 start-0 translate-middle-y bg-secondary fs-5 fw-normal text-white">${n.area}</span>
        <img src="${n.imgUrl}" class="card-img-top mb-1" alt="travel_1" style="height: 180px;">
        <span class="tag-m position-absolute bg-primary fw-normal text-white">${n.rate}</span>
        <div class="d-flex flex-column p-4" style="height: 296px;">
          <h3 class="card-title fs-4 fw-medium text-primary pb-1 border-bottom border-2 border-primary">${n.name}</h3>
          <p class="fw-normal text-info flex-grow-1">${n.description}</p>
          <div class="d-flex justify-content-between">
            <div class="d-flex align-items-center">
              <span class="material-symbols-outlined fs-5 text-primary me-1">
                info
              </span>
              <p class="fw-medium text-primary mb-0">剩下最後 ${n.group} 組</p>
            </div>
            <div class="d-flex align-items-center">
              <span class="fw-medium text-primary me-1">TWD</span>
              <p class="display-8 fw-medium text-primary mb-0">${n.price}</p>
            </div>
          </div>
        </div>
      </div>
    </li>`}),y.innerHTML=t}l();const v=document.querySelector("#regionSearch");v.addEventListener("change",function(e){l(e.target.value)});const b=document.querySelector(".addTicket"),f=document.querySelector("#ticketName"),c=document.querySelector("#imgUrl"),g=document.querySelector("#sightSpot"),d=document.querySelector("#ticketPrice"),m=document.querySelector("#ticketNum"),u=document.querySelector("#ticketRate"),i=document.querySelector("#ticketDescription");b.addEventListener("click",function(e){let r=o.length,t={};if(t.id=r++,t.name=f.value.trim(),t.imgUrl=c.value.trim(),t.area=g.value.trim(),t.description=i.value.trim(),t.group=Number(m.value.trim()),t.price=Number(d.value.trim()),t.rate=Number(u.value.trim()),Object.values(t).includes(""))alert("每個欄位都為必填！");else{o.push(t);const n=document.querySelector(".addTicketForm");v.value="全部地區",l("全部地區"),n.reset()}l()});f.addEventListener("blur",function(){const e=document.getElementById("ticketName-message");f.value.trim()?e.classList.add("d-none"):(e.classList.remove("d-none"),e.innerHTML=`<span class="material-symbols-outlined me-1">error
    </span><span>必填！</span>`)});c.addEventListener("blur",function(){const e=document.getElementById("imgUrl-message");/^(https?:\/\/)?([\w.-]+\.[a-z]{2,})(\/\S*)?$/i.test(c.value)?e.classList.add("d-none"):c.value.trim()===""?(e.value="",e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>'):(e.value="",e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>請輸入正確網址</span>')});g.addEventListener("blur",function(){const e=document.getElementById("sightSpot-message");g.value?e.classList.add("d-none"):(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>')});d.addEventListener("blur",function(){const e=document.getElementById("ticketPrice-message");/^[1-9]\d*$/.test(d.value)?e.classList.add("d-none"):d.value===""?(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>'):(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>金額需為正整數！</span>')});m.addEventListener("blur",function(){const e=document.getElementById("ticketNum-message");/^[1-9]\d*$/.test(m.value)?e.classList.add("d-none"):m.value===""?(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>'):(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>組數需為正整數！</span>')});u.addEventListener("blur",function(){const e=document.getElementById("ticketRate-message");/^[1-9]\d*$/.test(u.value)?e.classList.add("d-none"):u.value===""?(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>'):(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>請輸入1-10星級整數！</span>')});i.addEventListener("keyup",function(){const e=document.getElementById("ticketDescription-message");/^.{1-100}$/.test(i.value.trim())?e.classList.add("d-none"):i.value.trim()===""?(e.classList.remove("d-none"),e.innerHTML='<span class="material-symbols-outlined me-1">error</span><span>必填！</span>'):(e.classList.remove("d-none"),e.innerHTML=`<span class="material-symbols-outlined me-1">error</span><span>目前可填寫字數${100-i.value.trim().length}個字</span>`)});
